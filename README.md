# 教培管家 - 智能客服Agent

## 项目简介

基于"线下店文档.pdf"开发的智能客服系统，为教育行业创业者、中小机构负责人、区域经理提供精准的文档知识查询与实战指导服务。

## 核心功能

### 🏃‍♂️ 陪跑教练
- 指导0-1线下店全流程（选址、装修、运营）
- 多店复制模型指导
- 标准化体系建设

### 💰 财务管家
- 现金流预测与监控
- 成本控制标准解读（租金≤15%、人力≤40%等）
- 短期（前3个月）、中期（3-12个月）财务规划

### 🚨 急诊医生
- 风险场景快速匹配解决方案
- 政策突变应对策略
- 学员投诉处理方案
- 师资流失预防措施

### 💝 情感链接
- 创业者心态管理指导
- 压力缓解与情感支持
- 具体执行方向建议

## 技术架构

### RAG技术应用
- 文档分块：按章节/主题分块（500-1000字符，重叠度10%-15%）
- 向量化：使用text2vec-base-chinese模型
- 知识库：FAISS向量数据库

### 智能体构建
- 基于LangChain框架
- 阿里云通义千问-Turbo大模型
- 持续对话上下文维护

### 界面设计
- Streamlit现代化界面
- 科技感设计风格
- 快捷功能入口
- 关键词高亮显示

## 安装与配置

### 1. 环境准备
```bash
# 克隆项目
git clone <repository_url>
cd CSAgent

# 安装依赖
pip install -r requirements.txt
```

### 2. API配置
```bash
# 复制环境变量示例文件
cp env_example.txt .env

# 编辑.env文件，填入阿里云API密钥
DASHSCOPE_API_KEY=your_api_key_here
```

### 3. 运行应用
```bash
# 启动Web界面
streamlit run app.py
```

## 使用说明

### 启动流程
1. 首次运行时会自动处理PDF文档并构建知识库
2. 等待知识库构建完成（可能需要几分钟）
3. 访问Web界面开始对话

### 功能使用
- **快捷功能**：点击侧边栏的快捷按钮快速获取常见信息
- **自由对话**：在输入框中输入任何与线下店相关的问题
- **示例问题**：点击右侧的示例问题快速开始对话

### 对话限制
系统仅响应与"线下店文档.pdf"相关的问题，对无关内容会自动提示。

## 项目结构

```
CSAgent/
├── app.py                 # Streamlit主界面
├── agent.py              # 智能客服Agent主模块
├── pdf_processor.py      # PDF文档处理
├── vector_store.py       # 向量数据库
├── llm_client.py        # LLM客户端
├── quick_action_cache.py # 快捷功能缓存管理器
├── config.py            # 配置文件
├── requirements.txt      # 依赖包
├── env_example.txt      # 环境变量示例
├── README.md           # 项目说明
├── 线下店文档.pdf       # 知识库文档
├── quick_action_cache.json # 快捷功能缓存文件
└── vector_db/          # 向量数据库存储目录
```

## 核心特性

### 智能问答
- 基于文档内容的精准回答
- 上下文关联的连续对话
- 专业且温暖的回答风格

### 知识库管理
- 自动文档分块与向量化
- 高效的相似度搜索
- 持久化存储与快速加载

### 智能缓存系统
- 快捷功能响应缓存
- 首次调用大模型生成，后续直接读取缓存
- 缓存文件持久化保存
- 支持缓存统计和清空管理

### 用户体验
- 现代化Web界面
- 实时对话反馈
- 快捷功能入口（带智能缓存）
- 系统状态监控

## 技术栈

- **后端框架**: LangChain, Streamlit
- **向量数据库**: FAISS
- **大语言模型**: 阿里云通义千问-Turbo
- **文本向量化**: Sentence-Transformers
- **PDF处理**: PyPDF2
- **界面框架**: Streamlit

## 注意事项

1. **API密钥**: 需要有效的阿里云通义千问API密钥
2. **文档处理**: 首次运行需要处理PDF文档，请耐心等待
3. **网络连接**: 需要稳定的网络连接访问API服务
4. **硬件要求**: 建议至少4GB内存用于向量化处理

## 开发说明

### 自定义配置
- 修改`config.py`中的参数调整系统行为
- 调整`CHUNK_SIZE`和`CHUNK_OVERLAP`优化文档分块
- 修改`SYSTEM_PROMPT`自定义AI人设

### 扩展功能
- 在`agent.py`中添加新的快捷功能
- 在`app.py`中扩展界面功能
- 在`vector_store.py`中优化搜索算法
- 在`quick_action_cache.py`中自定义缓存策略

## 许可证

本项目仅供学习和研究使用。

